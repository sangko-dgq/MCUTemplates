C251 COMPILER V5.60.0,  page_trexrunner                                                    22/09/22  11:45:04  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE page_trexrunner
OBJECT MODULE PLACED IN .\Objects\page_trexrunner.obj
COMPILER INVOKED BY: D:\Application\Keil_C251\C251\BIN\C251.EXE User\PageManage\page_trexrunner.c XSMALL ROM(HUGE) OPTIM
                    -IZE(8,SPEED) BROWSE INCDIR(.\User;.\User\oled_gui;.\User\oled_gui\oled_core;.\User\oled_gui\oled_widget;.\User\PageManag
                    -e;.\User\Sensor;.\User\System;.\User\Bluetooth) DEBUG PRINT(.\Listings\page_trexrunner.lst) TABS(2) OBJECT(.\Objects\pag
                    -e_trexrunner.obj) 

stmt  level    source

    1          #include "iWatch.h"
    2          
    3          static unsigned char code T_REX[] = {
    4            21, 24,
    5            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0xFF,0xF3,0xF3,0xFF,0x7F,
    6            0x7F,0x7F,0x7F,0x7F,0x7E,0xFF,0xFF,0xF0,0xE0,0xE0,0xF0,0xF8,0xF8,0xFE,0xFF,0xFF,
    7            0xFF,0xFF,0xFF,0xFF,0x19,0x19,0x39,0x01,0x00,0x00,0x00,0x01,0x03,0x07,0x0F,0xFF,
    8            0xFF,0xDF,0x1F,0x1F,0xFF,0xFF,0xC7,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00/*"D:\图片\src=http___i-1.edow
             -ning.net_2021_8_9_20468a9e-48c9-49bd-a2ee-363bc86db125.jpg&refer=http___i-1.edowning.bmp",0*/
    9            /* (21 X 24 )*/
   10          };
   11          
   12          static unsigned char code TREE1[] = {
   13            14, 24,
   14            0x00,0x00,0x00,0x00,0x00,0xE0,0xF0,0xF0,0xE0,0x00,0x00,0xC0,0xC0,0x80,0xFE,0xFF,
   15            0xFF,0x80,0x00,0xFF,0xFF,0xFF,0xFF,0xE0,0xF0,0x7F,0x7F,0x3F,0x01,0x03,0x07,0x07,
   16            0x07,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,/*"D:\图片\TREE.BMP",0*/
   17            /* (14 X 24 )*/
   18          };
   19          
   20          static unsigned char code TREE2[] = {
   21            12, 16, 
   22            0xE0,0xE0,0x00,0x00,0xFC,0xFE,0xFC,0x80,0xC0,0xFC,0x7C,0x00,0x07,0x0F,0x1E,0x1C,
   23            0xFF,0xFF,0xFF,0x01,0x01,0x00,0x00,0x00,/*"D:\图片\TREE2.BMP",0*/
   24            /* (12 X 16 )*/
   25          };
   26          
   27          
   28          static unsigned char code GROUND1[] = {
   29            128, 16,
   30            0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
   31            0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
   32            0x80,0x80,0x80,0x40,0x40,0x40,0x40,0x40,0x40,0x60,0x20,0x30,0x10,0x10,0x08,0x08,
   33            0x08,0x08,0x04,0x04,0x04,0x04,0x04,0x0C,0x08,0x18,0x30,0x20,0x20,0x40,0x40,0x40,
   34            0x40,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
   35            0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x40,0x40,0x40,0x40,0x20,0x20,0x20,0x20,
   36            0x20,0x20,0x20,0xA0,0x20,0x20,0x20,0x20,0x20,0x60,0x40,0xC0,0x80,0x80,0x80,0x80,
   37            0x80,0x80,0x80,0xC0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0x80,
   38            0x00,0x00,0x00,0x00,0x02,0x02,0x02,0x00,0x00,0x10,0x10,0x10,0x10,0x00,0x00,0x00,
   39            0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x02,0x00,0x00,0x00,
   40            0x00,0x00,0x00,0x40,0x40,0x40,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,
   41            0x06,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x20,
   42            0x20,0x40,0x40,0x40,0x40,0x40,0x00,0x00,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x04,
   43            0x00,0x00,0x00,0x00,0x02,0x02,0x02,0x02,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
   44            0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   45            0x00,0x00,0xC2,0x40,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x00,0x00,0x00,0x00,/*"D:\图片\GROUND1.BMP",
             -0*/
   46            /* (128 X 16 )*/
   47          };
   48          static unsigned char code GROUND2[] = {
   49            128, 16,  
   50            0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xC0,0x60,0x30,0x10,0x10,0x10,0x10,
   51            0x10,0x10,0x10,0x30,0x20,0x60,0xC0,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
   52            0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   53            0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xC0,0x60,0x30,0x10,0x10,0x10,
   54            0x18,0x08,0x38,0xE0,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
C251 COMPILER V5.60.0,  page_trexrunner                                                    22/09/22  11:45:04  PAGE 2   

   55            0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
   56            0x80,0xC0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0x80,0x80,0x80,0x80,0x80,
   57            0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
   58            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x14,0x04,0x04,0x04,0x44,0x00,0x00,
   59            0x08,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x14,0x10,
   60            0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x41,0x41,0x41,0x41,0x41,0x01,0x01,0x01,0x01,
   61            0x01,0x01,0x01,0x01,0x00,0x00,0x10,0x20,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x40,
   62            0x40,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x00,0x00,0x08,0x08,0x08,0x00,0x08,0x00,
   63            0x00,0x00,0x00,0x01,0x01,0x03,0x02,0x03,0x01,0x41,0x01,0x01,0x11,0x11,0x11,0x11,
   64            0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x08,0x00,
   65            0x04,0x00,0x00,0x20,0x20,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"D:\图片\GROUND2.BMP",
             -0*/
   66            /* (128 X 16 )*/
   67          };
   68          
   69          static unsigned char code Icon[] = {
   70            48, 48,
   71            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   72            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xE0,0x60,0xE0,0xE0,0xE0,0xE0,
   73            0xE0,0xE0,0xE0,0xE0,0xE0,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   74            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   75            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFE,0xFE,0xFF,0xFF,0x9F,
   76            0x9F,0x9F,0x9F,0x9F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   77            0x00,0x00,0x00,0xF8,0xF0,0x00,0x80,0x80,0x00,0x00,0xFF,0xF8,0xE0,0xE0,0xC0,0xC0,
   78            0xC0,0xE0,0xF0,0xF8,0xF8,0xFC,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x18,0x18,
   79            0x38,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   80            0x1F,0x30,0x30,0xFF,0xFF,0x18,0x1F,0x0F,0x00,0x00,0x01,0x07,0x07,0x0F,0x3F,0x3F,
   81            0x7F,0xFF,0xFF,0xFF,0xFF,0x7F,0x7F,0xFF,0xFF,0xFF,0x3F,0x0F,0x03,0x03,0x00,0x00,
   82            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0xFC,0xC0,0xFE,0xFE,0x80,0xF0,0xF0,
   83            0x04,0x04,0x14,0x07,0x07,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,
   84            0x04,0x1F,0x1F,0x17,0x05,0x04,0x04,0x05,0x1F,0x1F,0x14,0x04,0x04,0x04,0x04,0x04,
   85            0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x07,0x1F,0x05,0x05,0x04,
   86            0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   87            0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x00,0x00,0x00,0x08,0x08,0x08,0x00,0x00,0x00,
   88            0x00,0x00,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"D:\图片\T-REX.bmp",0*
             -/
   89            /* (48 X 48 )*/
   90          };
   91          static t_psWidget label_score, label_game;
   92          static t_psWidget trex, tree1, tree2, tree3, bg1, bg2;
   93          static t_psGroup group1;
   94          static unsigned char xdata game_start = 0;
   95          static unsigned char xdata collided = 0;
   96          static unsigned int xdata score = 0;
   97          static unsigned char xdata collison_cnt = 0;
   98          
   99          /**
  100            * @brief  页面初始化事件
  101            * @param  无
  102            * @retval 无
  103            */
  104          static void Setup(unsigned char condition)
  105          {
  106   1        label_score = og_label_create(FONT_ASCII_5X7, 0, 0);
  107   1        label_game = og_label_create(FONT_ASCII_7X8, 34, -8);
  108   1        og_label_setText(label_game, "Game over!");
  109   1        og_widget_setAlignment(label_game, ALIGN_HORIZONMID);
  110   1        og_widget_setShow(label_game, 0);
  111   1        trex = og_bmp_create((t_psBMP)T_REX, 20, 36);
  112   1        tree1 = og_bmp_create((t_psBMP)TREE1, 96, 36);
  113   1        tree2 = og_bmp_create((t_psBMP)TREE2, 140, 44);
  114   1        tree3 = og_bmp_create((t_psBMP)TREE2, 240, 44);
  115   1        bg1 = og_bmp_create((t_psBMP)GROUND1, 0, 48);
  116   1        bg2 = og_bmp_create((t_psBMP)GROUND2, 128, 48);
  117   1        group1 = og_group_create(8);
  118   1        og_group_addWidget(group1, label_score, 0);
C251 COMPILER V5.60.0,  page_trexrunner                                                    22/09/22  11:45:04  PAGE 3   

  119   1        og_group_addWidget(group1, label_game, 0);
  120   1        og_group_addWidget(group1, trex, 0);
  121   1        og_group_addWidget(group1, tree1, 0);
  122   1        og_group_addWidget(group1, tree2, 0);
  123   1        og_group_addWidget(group1, tree3, 0);
  124   1        og_group_addWidget(group1, bg1, 0);
  125   1        og_group_addWidget(group1, bg2, 0);
  126   1        og_group_setPosOffset(group1, 0, 64);
  127   1        og_group_addAnimOffset(group1, 0, -64, ANIM_TIME_NORM, ANIM_NULL_CB);
  128   1        srand((time.second << 8) | time.minute);    //随便整个数作为随机数播种
  129   1        game_start = 1;
  130   1        collided = 0;
  131   1        score = 0;
  132   1        collison_cnt = 0;
  133   1      }
*** WARNING C47 IN LINE 104 OF User\PageManage\page_trexrunner.c: 'condition': unreferenced parameter
  134          static void delet(void)
  135          {
  136   1        og_group_delet(group1);
  137   1        pageSetStatus(page_trexrunner, PAGE_IDLE);
  138   1      }
  139          /**
  140            * @brief  页面退出事件
  141            * @param  无
  142            * @retval 无
  143            */
  144          static void Exit(unsigned char condition)
  145          {
  146   1        og_group_addAnimOffset(group1, 0, 64, ANIM_TIME_NORM, delet);
  147   1      }
*** WARNING C47 IN LINE 144 OF User\PageManage\page_trexrunner.c: 'condition': unreferenced parameter
  148          #define ABS(a, b) (a<b?(b-a):(a-b))
  149          /**
  150            * @brief  页面循环执行的内容
  151            * @param  无
  152            * @retval 无
  153            */
  154          static void Loop()
  155          {
  156   1        if(pageExecuteRate(&Rate50Hz))
  157   1        {
  158   2          iWatchKeepActive();
  159   2          if(game_start)
  160   2          {
  161   3            if(collided == 1)
  162   3            {
  163   4              static unsigned int t_cnt = 0;
  164   4              if(t_cnt % 5 == 0)
  165   4              {
  166   5                if(trex->config & WIDGET_SHOW)
  167   5                  trex->config &= ~WIDGET_SHOW;
  168   5                else
  169   5                  trex->config |= WIDGET_SHOW;
  170   5              }
  171   4              if(t_cnt++ == 100)
  172   4              {
  173   5                t_cnt = 0;
  174   5                trex->config |= WIDGET_SHOW;
  175   5                collided = 0;
  176   5              }
  177   4            }
  178   3            else
  179   3            {
  180   4              //碰撞检测
  181   4              if((tree1->x - trex->x < trex->w) && (tree1->x - trex->x > -tree1->w))
  182   4              {
C251 COMPILER V5.60.0,  page_trexrunner                                                    22/09/22  11:45:04  PAGE 4   

  183   5                if(tree1->y - trex->y < 20)//tree1->h
  184   5                  collided = 1;
  185   5              }
  186   4              if(trex->x - tree1->x == tree1->w)
  187   4              {
  188   5                if(collided == 0)
  189   5                  score++;
  190   5              }
  191   4              if((tree2->x - trex->x < trex->w) && (tree2->x - trex->x > -tree2->w))
  192   4              {
  193   5                if(tree2->y - trex->y < 15)//tree2->h
  194   5                  collided = 1;
  195   5              }
  196   4              if(trex->x - tree2->x == tree2->w)
  197   4              {
  198   5                if(collided == 0)
  199   5                  score++;
  200   5              }
  201   4              if((tree3->x - trex->x < trex->w) && (tree3->x - trex->x > -tree3->w))
  202   4              {
  203   5                if(tree3->y - trex->y < 20)//tree3->h
  204   5                  collided = 1;
  205   5              }
  206   4              if(trex->x - tree3->x == tree3->w)
  207   4              {
  208   5                if(collided == 0)
  209   5                  score++;
  210   5              }
  211   4              if(collided == 1)
  212   4              {
  213   5                Bee();
  214   5                if(++collison_cnt == 3)
  215   5                {
  216   6                  game_start = 0;
  217   6                  og_widget_setShow(label_game, 1);
  218   6                  og_anim_create(label_game, label_game->x, 24, ANIM_TIME_NORM, ANIM_NULL_CB);
  219   6                }
  220   5              }
  221   4            }
  222   3            if(tree1->x-- < -12)
  223   3            {
  224   4              tree1->x = 128 + (rand() % 128);
  225   4            }
  226   3            if(tree2->x-- < -12)
  227   3            {
  228   4              tree2->x = 128 + (rand() % 128);
  229   4            }
  230   3            if(tree3->x-- < -12)
  231   3            {
  232   4              tree3->x = 128 + (rand() % 128);
  233   4            }
  234   3            if(bg1->x-- == -128)
  235   3              bg1->x = 128;
  236   3            if(bg2->x-- == -128)
  237   3              bg2->x = 128;
  238   3            lablel_printf(label_score, "%u", score);
  239   3          }
  240   2        }
  241   1      }
  242          void anim_fall(void)
  243          {
  244   1        og_anim_create(trex, 20, 36, 350, ANIM_NULL_CB);
  245   1      }
  246          void anim_jump(void)
  247          {
  248   1        og_anim_create(trex, 20, 4, 300, anim_fall);
C251 COMPILER V5.60.0,  page_trexrunner                                                    22/09/22  11:45:04  PAGE 5   

  249   1      }
  250          /**
  251            * @brief  页面事件
  252            * @param  btn:发出事件的按键
  253            * @param  event:事件编号
  254            * @retval 无
  255            */
  256          static void Event(unsigned char event)
  257          {
  258   1        if(event == KEY1_PRESSED)
  259   1          pageShift(page_menu, PAGE_RETURN);
  260   1        else if(event == KEY3_PRESSED)
  261   1        {
  262   2          anim_jump();
  263   2        }
  264   1        else if(event == KEY4_PRESSED)
  265   1        {
  266   2          //og_anim_create(text2, 48, 0, ANIM_TIME_NORM, ANIM_NULL_CB);
  267   2        }
  268   1      }
  269          void pageRegister_page_trexrunner(unsigned char pageID)
  270          {
  271   1        pageRegister(pageID, "T-REX RUNNER", Icon, Setup, Loop, Exit, Event);
  272   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       941     ------
  ecode size           =      1392     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =         5     ------
  xdata-const size     =    ------     ------
  edata size           =        38     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        58     ------
End of Module Information.


C251 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
