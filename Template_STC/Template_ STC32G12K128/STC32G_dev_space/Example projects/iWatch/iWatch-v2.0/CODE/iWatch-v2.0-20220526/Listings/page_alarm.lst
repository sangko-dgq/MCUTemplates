C251 COMPILER V5.60.0,  page_alarm                                                         24/08/22  19:19:16  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE page_alarm
OBJECT MODULE PLACED IN .\Objects\page_alarm.obj
COMPILER INVOKED BY: D:\Application\keilC251_v560\C251\BIN\C251.EXE User\PageManage\page_alarm.c XSMALL ROM(HUGE) OPTIMI
                    -ZE(8,SPEED) BROWSE INCDIR(.\User;.\User\oled_gui;.\User\oled_gui\oled_core;.\User\oled_gui\oled_widget;.\User\PageManage
                    -;.\User\Sensor;.\User\System;.\User\Bluetooth) DEBUG PRINT(.\Listings\page_alarm.lst) TABS(2) OBJECT(.\Objects\page_alar
                    -m.obj) 

stmt  level    source

    1          #include "iWatch.h"
    2          
    3          static unsigned char CODE Icon[] = {
    4            48, 48,
    5            0x00,0x80,0xE0,0x70,0x18,0x0C,0x0C,0x06,0x06,0x06,0x86,0xC6,0x6C,0x7C,0x18,0x10,
    6            0x00,0x00,0x00,0x00,0x10,0x30,0xF0,0xF0,0x30,0x30,0x00,0x00,0x00,0x00,0x00,0x00,
    7            0x18,0x38,0x7C,0xEC,0xC6,0x86,0x06,0x06,0x06,0x0C,0x0C,0x18,0x70,0xE0,0x80,0x00,
    8            0x00,0x0F,0x3F,0x70,0xE0,0x70,0x38,0x1C,0x0E,0x07,0x83,0xC1,0xE0,0x70,0x38,0x18,
    9            0x0C,0x0C,0x0E,0x06,0x06,0x06,0xE7,0xE7,0x06,0x06,0x06,0x06,0x06,0x0C,0x0C,0x1C,
   10            0x18,0x30,0x70,0xE0,0xC1,0x03,0x07,0x0E,0x1C,0x38,0x70,0xE0,0x70,0x3F,0x0F,0x00,
   11            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xFC,0x1E,0x07,0x01,0x00,0x00,0x00,0x00,
   12            0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   13            0x00,0x00,0x00,0x00,0x03,0x07,0x3E,0xF8,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   14            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
   15            0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x07,0x0C,0x0C,0x18,0x18,0x38,0x30,0x00,0x00,
   16            0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xFF,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   17            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x0F,0x1E,0x38,0x70,0xE0,0xC0,0x80,
   18            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
   19            0x80,0xC0,0xE0,0x70,0x38,0x1E,0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   20            0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x70,0x38,0x1C,0x0E,0x07,0x03,
   21            0x03,0x03,0x06,0x06,0x06,0x0E,0x0C,0x0C,0x0C,0x0C,0x06,0x06,0x06,0x06,0x03,0x03,
   22            0x03,0x07,0x0C,0x18,0x30,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
   23            /* (48 X 48 )*/
   24          };
   25          static t_psWidget text1, text2, text3, text4, text5, text6;
   26          static t_psGroup group1;
   27          static char code ALARM_MODE[5][7] = 
   28          {
   29            {"关闭\0"},
   30            {"单次\0"},
   31            {"每天\0"},
   32            {"工作日\0"},
   33            {"某一天\0"}
   34          };
   35          static char code ch1[] = "闹钟模式：";
   36          static char code ch2[] = "时　分";
   37          static char code ch3[] = "时　分　日";
   38          
   39          /**
   40            * @brief  页面初始化事件
   41            * @param  无
   42            * @retval 无
   43            */
   44          static void Setup(unsigned char condition)
   45          {
   46   1        text1 = og_label_create(FONT_GB2312_15X16, 0, 0);
   47   1        og_label_setText(text1, ch1);
   48   1        text2 = og_label_create(FONT_GB2312_15X16, 80, 0);
   49   1        og_label_setText(text2, ALARM_MODE[config.alarm.mode]);
   50   1        og_widget_setPos(text2, OLED_WIDTH - text2->w, 0);    //右对齐
   51   1        text3 = og_label_create(FONT_GB2312_15X16, 48, 20);
   52   1        og_label_setText(text3, ch2);
   53   1        text4 = og_label_create(FONT_ASCII_8X16, 32, 20);
   54   1        text5 = og_label_create(FONT_ASCII_8X16, 64, 20);
   55   1        text6 = og_label_create(FONT_ASCII_8X16, 80, 20);
   56   1        if(config.alarm.mode != ALARM_SPECIFIC_DAY)
C251 COMPILER V5.60.0,  page_alarm                                                         24/08/22  19:19:16  PAGE 2   

   57   1        {
   58   2          og_widget_setShow(text6, 0);
   59   2        }
   60   1        else
   61   1        {
   62   2          og_widget_setPos(text3, 32, 20);
   63   2          og_widget_setPos(text4, 16, 20);
   64   2          og_widget_setPos(text5, 48, 20);
   65   2          og_widget_setPos(text6, 80, 20);
   66   2        }
   67   1        group1 = og_group_create(6);
   68   1        og_group_addWidget(group1, text1, 0);
   69   1        og_group_addWidget(group1, text2, 1);
   70   1        og_group_addWidget(group1, text3, 0);
   71   1        og_group_addWidget(group1, text4, 1);
   72   1        og_group_addWidget(group1, text5, 1);
   73   1        og_group_addWidget(group1, text6, 1);
   74   1        og_group_setPosOffset(group1, 0, 64);
   75   1        og_group_addAnimOffset(group1, 0, -64, ANIM_TIME_NORM, ANIM_NULL_CB);
   76   1      }
*** WARNING C47 IN LINE 44 OF User\PageManage\page_alarm.c: 'condition': unreferenced parameter
   77          static void delet(void)
   78          {
   79   1        og_group_delet(group1);
   80   1        pageSetStatus(page_alarm, PAGE_IDLE);
   81   1      }
   82          /**
   83            * @brief  页面退出事件
   84            * @param  无
   85            * @retval 无
   86            */
   87          static void Exit(unsigned char condition)
   88          {
   89   1        RX8130CESetAlarm(&config.alarm);
   90   1        iWatchSaveConfig(&config);
   91   1        og_group_addAnimOffset(group1, 0, 64, ANIM_TIME_NORM, delet);
   92   1      }
*** WARNING C47 IN LINE 87 OF User\PageManage\page_alarm.c: 'condition': unreferenced parameter
   93          /**
   94            * @brief  页面循环执行的内容
   95            * @param  无
   96            * @retval 无
   97            */
   98          static void Loop()
   99          {
  100   1        if(pageExecuteRate(&Rate20Hz))
  101   1        {
  102   2          og_label_setText(text2, ALARM_MODE[config.alarm.mode]);
  103   2          og_widget_setPos(text2, 128 - text2->w, 0);
  104   2          lablel_printf(text4, "%02d", config.alarm.hour);
  105   2          lablel_printf(text5, "%02d", config.alarm.minute);
  106   2          lablel_printf(text6, "%2d", config.alarm.day);
  107   2        }
  108   1      }
  109          void showText6()
  110          {
  111   1        og_widget_setShow(text6, 1);
  112   1      }
  113          /**
  114            * @brief  页面事件
  115            * @param  btn:发出事件的按键
  116            * @param  event:事件编号
  117            * @retval 无
  118            */
  119          static void Event(unsigned char event)
  120          {
C251 COMPILER V5.60.0,  page_alarm                                                         24/08/22  19:19:16  PAGE 3   

  121   1        if(event == KEY1_PRESSED || event == AWT)
  122   1          pageShift(page_menu, PAGE_RETURN);
  123   1        else if(event == KEY3_PRESSED)
  124   1        {
  125   2          og_group_focusWidget(group1, FOCUS_NEXT);
  126   2          if(og_group_getFocusIndex(group1) == 5)
  127   2          {
  128   3            if(config.alarm.mode!=ALARM_SPECIFIC_DAY)
  129   3              og_group_focusWidget(group1, FOCUS_NEXT);
  130   3          }
  131   2        }
  132   1        else if(event == KEY2_PRESSED)
  133   1        {
  134   2          unsigned char i = og_group_getFocusIndex(group1);
  135   2          if(i == 1)
  136   2          {
  137   3            if(config.alarm.mode == ALARM_SPECIFIC_DAY)
  138   3            {
  139   4              og_label_setText(text3, ch2);
  140   4              og_anim_create(text3, 48, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  141   4              og_anim_create(text4, 32, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  142   4              og_anim_create(text5, 64, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  143   4              og_widget_setShow(text6, 0);
  144   4            }
  145   3            if(++config.alarm.mode > ALARM_SPECIFIC_DAY)
  146   3              config.alarm.mode = ALARM_DISABLE;
  147   3            if(config.alarm.mode == ALARM_SPECIFIC_DAY)
  148   3            {
  149   4              og_label_setText(text3, ch3);
  150   4              og_anim_create(text3, 32, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  151   4              og_anim_create(text4, 16, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  152   4              og_anim_create(text5, 48, 20, ANIM_TIME_NORM, showText6);
  153   4            }
  154   3          }
  155   2          else if(i == 3)
  156   2          {
  157   3            if(++config.alarm.hour == 24)
  158   3              config.alarm.hour = 0;
  159   3          }
  160   2          else if(i == 4)
  161   2          {
  162   3            if(++config.alarm.minute == 60)
  163   3              config.alarm.minute = 0;
  164   3          }
  165   2          else if(i == 5)
  166   2          {
  167   3            if(++config.alarm.day == 32)
  168   3              config.alarm.day = 1;
  169   3          }
  170   2        }
  171   1        else if(event == KEY4_PRESSED)
  172   1        {
  173   2          unsigned char i = og_group_getFocusIndex(group1);
  174   2          if(i == 1)
  175   2          {
  176   3            if(config.alarm.mode == ALARM_SPECIFIC_DAY)
  177   3            {
  178   4              og_label_setText(text3, ch2);
  179   4              og_anim_create(text3, 48, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  180   4              og_anim_create(text4, 32, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  181   4              og_anim_create(text5, 64, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  182   4              og_widget_setShow(text6, 0);
  183   4            }
  184   3            if(--config.alarm.mode == 255)
  185   3              config.alarm.mode = ALARM_SPECIFIC_DAY;
  186   3            if(config.alarm.mode == ALARM_SPECIFIC_DAY)
C251 COMPILER V5.60.0,  page_alarm                                                         24/08/22  19:19:16  PAGE 4   

  187   3            {
  188   4              og_label_setText(text3, ch3);
  189   4              og_anim_create(text3, 32, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  190   4              og_anim_create(text4, 16, 20, ANIM_TIME_NORM, ANIM_NULL_CB);
  191   4              og_anim_create(text5, 48, 20, ANIM_TIME_NORM, showText6);
  192   4            }
  193   3          }
  194   2          else if(i == 3)
  195   2          {
  196   3            if(--config.alarm.hour == 255)
  197   3              config.alarm.hour = 23;
  198   3          }
  199   2          else if(i == 4)
  200   2          {
  201   3            if(--config.alarm.minute == 255)
  202   3              config.alarm.minute = 59;
  203   3          }
  204   2          else if(i == 5)
  205   2          {
  206   3            if(--config.alarm.day == 0)
  207   3              config.alarm.day = 31;
  208   3          }
  209   2        }
  210   1      }
  211          void pageRegister_page_alarm(unsigned char pageID)
  212          {
  213   1        pageRegister(pageID, "ALARM", Icon, Setup, Loop, Exit, Event);
  214   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       354     ------
  ecode size           =      1408     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        28     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        15     ------
End of Module Information.


C251 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
